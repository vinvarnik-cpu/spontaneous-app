const tasks = [
  // Простые задания
  "Сделай одно необычное движение рукой",
  "Подними плечи вверх и резко отпусти",
  "Скажи себе комплимент про себя",
  "Посмотри в окно и найди что-то новое",
  "Сделай 5 глубоких вдохов",
  "Закрой глаза на 10 секунд и сосчитай дыхания",
  "Поменяй руку, которой держишь телефон",
  "Посмотри на потолок и замри на 5 секунд",
  "Сделай необычное движение ногами",
  "Положи руку на сердце и вдохни глубоко",
  "Поверни голову на 90 градусов и замри на 5 секунд",
  "Выключи звук телефона на 1 минуту",
  "Скажи «стоп» перед привычным действием",
  "Посмотри на объект в комнате и найди новую деталь",
  "Сделай паузу перед тем, как взять телефон",
  "Скажи одно правдивое слово кому-то рядом",
  "Подними подбородок, идя по улице",
  "Сделай короткую растяжку рук",
  "Закрой глаза и прислушайся к звукам вокруг",
  "Попробуй другую позу, сидя на стуле",

  // Средние задания
  "Напиши короткую правду себе на бумаге",
  "Придумай короткий ритуал на 1–2 минуты",
  "Составь план маленького шага для дискомфорта",
  "Выбери непривычный вариант действия",
  "Сделай паузу и обдумай, что чувствуешь",
  "Скажи комплимент случайному человеку про себя",
  "Посмотри в глаза человеку 3 секунды",
  "Придумай альтернативное решение обычной задачи",
  "Составь 3 шага для выхода из зоны комфорта",
  "Поменяй последовательность привычного действия",
  "Выбери непривычный путь домой/на работу",
  "Сделай паузу перед обычным действием, понаблюдай",
  "Придумай короткое правило для себя на 10 минут",
  "Скажи себе вслух одно чувство, которое испытываешь",
  "Сделай необычное дыхательное упражнение",
  "Напиши 1 благодарность вслух",
  "Составь маленькую задачу на сегодня, необычную",
  "Сделай паузу перед привычным ответом",
  "Придумай маленький творческий шаг в работе",
  "Сделай необычное движение глазами",

  // Сложные / «головоломка»
  "Напиши одно правило для себя на целый день",
  "Придумай необычное сочетание привычных действий",
  "Сделай одну маленькую неловкую вещь на улице",
  "Составь необычную комбинацию утренних действий",
  "Скажи неожиданное слово вслух самому себе",
  "Придумай маленький эксперимент с привычкой",
  "Составь список того, что ты обычно откладываешь",
  "Придумай креативное решение простой проблемы",
  "Измени один привычный жест на новый",
  "Составь короткую мини-историю про себя",
  "Подумай, что бы сделал другой человек в твоей ситуации",
  "Скажи случайному человеку комплимент",
  "Поменяй привычную последовательность утренних действий",
  "Сделай маленький шаг в непривычном направлении",
  "Придумай необычную комбинацию движений в комнате",
  "Составь 3 варианта необычного решения привычной задачи",
  "Представь альтернативную реальность на 1 минуту",
  "Придумай необычный способ сказать обычное слово",
  "Составь мини-ритуал для выхода из зоны комфорта",
  "Сделай шаг в сторону, который обычно не делаешь",

  // Дублируем до 100 заданий, чередуя простое, среднее, сложное
  "Посмотри на объект и придумай три использования",
  "Скажи комплимент себе через зеркало",
  "Сделай паузу и сосчитай 10 вдохов",
  "Придумай мини-сценарий на 1 минуту",
  "Составь необычное решение для простой задачи",
  "Попробуй сесть в неудобной позе на 30 секунд",
  "Скажи «да» там, где обычно говоришь «нет»",
  "Придумай короткую историю с 3 предложений",
  "Измени привычный порядок действий на работе",
  "Составь 3 идеи для необычного подхода",
  "Сделай 5 шагов необычным способом",
  "Подними руки и замри на 10 секунд",
  "Придумай альтернативное название привычной вещи",
  "Составь мини-план для нестандартного шага",
  "Скажи короткое слово, которое смущает",
  "Посмотри на потолок и представь что-то необычное",
  "Сделай маленький творческий эксперимент",
  "Скажи одно неожиданное слово вслух",
  "Придумай необычный способ пить воду",
  "Составь список 3 необычных действий на день",
  "Измени привычный маршрут на минуту",
  "Сделай шаг в непривычную сторону",
  "Придумай необычное сочетание звуков и движений",
  "Составь мини-игру для себя на 2 минуты",
  "Скажи комплимент незнакомцу про мелочь",
  "Придумай необычное использование предмета рядом",
  "Поменяй руку для обычного действия",
  "Сделай паузу перед привычным жестом",
  "Придумай короткий странный ритуал",
  "Посмотри на руки и представь их необычно",
  "Придумай один нестандартный шаг в работе",
  "Скажи себе правду через зеркало",
  "Составь необычное действие на ближайшие 3 минуты",
  "Придумай необычную мини-историю про улицу",
  "Сделай необычное дыхательное упражнение на месте",
  "Составь мини-план действия в непривычной ситуации",
  "Придумай альтернативное использование чашки/ручки",
  "Сделай шаг в сторону привычного пути",
  "Придумай короткий способ усложнить привычку",
  "Скажи необычное слово, которое раздражает комфорт",
  "Придумай одно действие, которое никто не ожидает",
  "Составь мини-сценарий действий на минуту",
  "Посмотри в зеркало и найди 1 странную деталь",
  "Сделай паузу и обдумай эмоцию 10 секунд",
  "Скажи короткое слово вслух, которое редко используешь",
  "Придумай альтернативное решение привычного действия",
  "Сделай необычное движение на стуле",
  "Составь мини-ритуал на 2 минуты для дискомфорта",
  "Посмотри на улицу и придумай необычное наблюдение",
  "Скажи комплимент себе про привычное действие",
  "Составь мини-эксперимент с привычной задачей",
  "Измени привычное действие на минуту",
  "Сделай шаг, который кажется странным",
  "Придумай одно короткое правило для нового дня",
  "Составь мини-список необычных идей на 3 минуты",
  "Скажи короткое слово, которое редко произносишь",
  "Посмотри на предмет и придумай новое применение",
  "Сделай необычное движение глазами на месте",
  "Составь мини-ритуал для дискомфорта на 1–2 минуты",
  "Придумай один маленький шаг, который пугает",
  "Скажи что-то неожиданное самому себе"
];



let settings = { tasksPerDay: 1 };
let completedToday = 0;
let currentTimer;
let timeLeft = 120;

const taskText = document.getElementById("task");
const getTaskBtn = document.getElementById("getTaskBtn");
const actions = document.getElementById("actions");
const timerEl = document.getElementById("timer");
const doneBtn = document.querySelector(".done");
const skipBtn = document.querySelector(".skip");
const settingsBtn = document.getElementById("settingsBtn");

getTaskBtn.onclick = () => {
  let shownTasks = JSON.parse(localStorage.getItem("shownTasks") || "[]");

  if (completedToday >= settings.tasksPerDay) {
    taskText.innerText = "На сегодня дискомфорта достаточно";
    return;
  }

  // Фильтруем задания, которые уже были
  const remainingTasks = tasks.filter(t => !shownTasks.includes(t));

  if (remainingTasks.length === 0) {
    taskText.innerText = "Все задания уже были! Сбросим для повторов.";
    localStorage.removeItem("shownTasks");
    return;
  }

  // Случайное задание из оставшихся
  const task = remainingTasks[Math.floor(Math.random() * remainingTasks.length)];
  taskText.innerText = task;

  // Сохраняем, что задание показано
  shownTasks.push(task);
  localStorage.setItem("shownTasks", JSON.stringify(shownTasks));

  actions.classList.remove("hidden");
  startTimer();
};


function startTimer() {
  clearInterval(currentTimer);
  timeLeft = 120;
  updateTimer();
  currentTimer = setInterval(() => {
    timeLeft--;
    updateTimer();
    if (timeLeft <= 0) clearInterval(currentTimer);
  }, 1000);
}

function updateTimer() {
  const min = Math.floor(timeLeft / 60);
  const sec = timeLeft % 60;
  timerEl.innerText = `⏱ ${min}:${sec < 10 ? "0" : ""}${sec}`;
}

doneBtn.onclick = () => {
  clearInterval(currentTimer);
  completedToday++;
  taskText.innerText = "⚡ Засчитано. Дискомфорт выбран.";
  actions.classList.add("hidden");
};

skipBtn.onclick = () => {
  clearInterval(currentTimer);
  taskText.innerText = "Комфорт выбран. Серия сброшена.";
  completedToday = settings.tasksPerDay;
  actions.classList.add("hidden");
};

settingsBtn.onclick = () => {
  let input = prompt("Сколько спонтанных заданий в день? (минимум 1)", settings.tasksPerDay);
  input = parseInt(input);
  if (input >= 1) {
    settings.tasksPerDay = input;
    localStorage.setItem("settings", JSON.stringify(settings));
    alert("Настройки сохранены");
  } else {
    alert("Минимум 1 задание обязательно");
  }
};
